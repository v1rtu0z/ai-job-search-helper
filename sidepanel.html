<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI job search helper Side Panel</title>
    <link rel="stylesheet" href="sidepanel.css">
    <style>
        /* Custom animations and specific styles that can't be replicated with Tailwind */
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-radius: 50%;
            border-top: 4px solid #3498db;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        .loading-msg {
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }

        .loading-msg.visible {
            opacity: 1;
        }

        /* Theme selection styles - removed old grid styles, added carousel styles */
        .theme-indicator.active {
            background-color: #3b82f6;
        }

        .theme-display.selected {
            border-color: #3b82f6;
            background-color: #eff6ff;
        }

        /* Hover animations for action buttons */
        .hover-scale:hover {
            transform: scale(1.05);
            transition: transform 0.2s ease-in-out;
        }

        /* Custom bullet points for instruction list */
        .instruction-list {
            list-style: none;
            padding-left: 0;
        }

        .instruction-list li {
            position: relative;
            padding-left: 1.5em;
            margin-bottom: 0.5em;
        }

        .instruction-list li::before {
            content: "•";
            position: absolute;
            left: 0;
            top: 0;
            color: #374151;
            font-weight: bold;
        }

        .column-left {
            float: left;
            width: 48%; /* Adjust to control column width */
            margin-right: 2%; /* Space between columns */
        }

        .column-right {
            float: left;
            width: 50%;
        }

        /* Clearfix to contain the floated elements */
        .clearfix::after {
            content: "";
            clear: both;
            display: table;
        }
    </style>
</head>
<body class="font-sans m-0 p-4 bg-gray-100 text-gray-800 pb-20">

<div class="relative h-6 mb-6 bg-gray-100">
    <button id="back-btn"
            class="absolute left-0 w-6 h-6 flex justify-center items-center cursor-pointer p-0 bg-transparent border-0 transition-transform duration-200 ease-in-out hover:scale-125 hidden">
        <strong style="font-size: 2rem; transform: scaleX(-1);">➜</strong>
    </button>

    <button id="settings-btn"
            class="absolute right-0 w-6 h-6 flex justify-center items-center cursor-pointer p-0 bg-transparent border-0 transition-transform duration-200 ease-in-out hover:scale-125">
        <strong style="font-size: 2rem;">⚙️</strong>
    </button>

    <a id="github-link"
       class="absolute right-0 w-6 h-6 flex justify-center items-center cursor-pointer p-0 bg-transparent border-0 transition-transform duration-200 ease-in-out hover:scale-125 hidden"
       href="https://github.com/v1rtu0z/ai-job-search-helper" target="_blank" rel="noopener noreferrer">
        <svg class="w-6 h-6 fill-gray-800" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <title>GitHub</title>
            <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.777.418-1.305.762-1.604-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.046.138 3.006.404 2.296-1.552 3.297-1.23 3.297-1.23.645 1.653.24 2.873.105 3.176.77.84 1.235 1.91 1.235 3.22 0 4.61-2.805 5.624-5.475 5.923.42.36.81 1.096.81 2.22 0 1.606-.015 2.897-.015 3.286 0 .315.21.69.825.577C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/>
        </svg>
    </a>
</div>

<hr class="border-0 h-px bg-gray-300 my-4">

<div id="instruction-display" class="view-section">
    <h3 class="text-lg font-semibold mb-4">Instructions</h3>
    <h4 class="text-base font-medium mb-2" id="instructions-greeting"></h4>
    <p class="mb-4">To begin, <strong>select a job description on any webpage</strong>. Once the text is highlighted,
        choose one of the following options <strong>to analyze how well your resume matches the job
            requirements</strong>:</p>
    <ul class="instruction-list mb-4">
        <li>
            <p>
                <strong>Right-click</strong> on the selected text and choose "<strong>Analyze Job Posting Fit</strong>"
                from the context menu.
            </p>
        </li>
        <li>
            <p id="shortcut-instructions">
                Use the keyboard shortcut <strong>Ctrl+B</strong> (or <strong>Cmd+B</strong> on Mac) by default, but you
                can change this in Chrome extension settings. This shortcut will trigger the analysis.
            </p>
        </li>
        <li>
            <p>
                Alternatively, you can paste a job description directly below:
            </p>
        </li>
    </ul>

    <div class="bg-white p-5 rounded-lg shadow-md mb-4">
        <label for="job-description-input" class="block mb-2 font-bold">Job Description:</label>
        <textarea id="job-description-input" rows="8"
                  placeholder="Paste the job description here and click the analyze button below..."
                  class="w-full p-3 mb-4 border border-gray-300 rounded box-border resize-y"></textarea>
        <button id="analyze-job-description-btn"
                class="bg-blue-500 text-white py-3 px-5 border-0 rounded cursor-pointer w-full text-base hover:bg-blue-600 transition-colors duration-200">
            ✨ Analyze Job Description
        </button>
    </div>

    <div id="instruction-content">
        <div id="search-query-section" class="bg-white p-5 rounded-lg shadow-md mb-4 hidden">
            <div class="search-query-header relative">
                <button id="refresh-query-btn"
                        class="absolute right-0 w-6 h-6 flex justify-center items-center cursor-pointer p-0 bg-transparent border-0 transition-transform duration-200 ease-in-out hover:scale-125">
                    <strong style="font-size: 2rem">⟳</strong>
                </button>
                <h3 class="text-lg font-semibold mb-4">Your Personalized Search Query</h3>
            </div>
            <p class="mb-4">Here's a personalized LinkedIn search query. <strong>Click the link below</strong> to open a
                new tab and start your job search:</p>

            <a id="search-query-link" href="#" target="_blank"
               class="bg-gray-100 border-l-4 border-gray-400 p-3 block whitespace-pre-wrap break-words mb-4 text-sm font-mono text-blue-600 hover:text-blue-800 hover:underline transition-colors flex items-center justify-between">
                <span id="search-query-text" class="min-w-0 flex-grow"></span>
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 ml-2 flex-shrink-0" viewBox="0 0 24 24">
                    <path d="M14,3H22V11H20V6.41L12.71,13.71L11.29,12.29L18.59,5H14V3M19,19V14H21V19A2,2 0 0,1 19,21H5A2,2 0 0,1 3,19V5A2,2 0 0,1 5,3H10V5H5V19H19Z"/>
                </svg>
            </a>

            <p><strong>Tip:</strong> Extending the query with more specific terms will yield better results!</p>
        </div>
    </div>
</div>


<div id="output-section" class="bg-white p-5 rounded-lg shadow-md mb-4 hidden">
    <div class="mt-6">
        <label for="cover-letter-textarea" id="cover-letter-textarea-title" class="block mb-2 font-bold">
            Cover letter
        </label>

        <div class="bg-amber-50 border-l-4 border-amber-400 p-4 mb-4 rounded-r-lg hidden" id="cover-letter-warning">
            <div class="flex">
                <div class="flex-shrink-0">
                    <p class="h-5 w-5 text-amber-400">
                        ⚠️
                    </p>
                </div>
                <div class="ml-3">
                    <p class="text-sm text-amber-700">
                        <strong>Important:</strong> It's not recommended to send AI-generated cover letters as-is.
                        Please review and personalize the content before downloading or sending.
                    </p>
                </div>
            </div>
        </div>

        <textarea id="cover-letter-textarea"
                  class="w-full h-96 p-3 border border-gray-300 rounded box-border font-sans text-sm leading-6 resize-y hidden"></textarea>
    </div>

    <div id="resume-preview-container"
         class="w-full min-h-96 overflow-auto border rounded-lg bg-gray-50 relative hidden">
        <div class="absolute top-2 right-2 z-10 flex gap-2" id="zoom-controls">
            <button id="zoom-in-btn"
                    class="w-8 h-8 bg-white border border-gray-300 rounded-full shadow-md hover:bg-gray-50 flex items-center justify-center transition-colors duration-200"
                    title="Zoom In">
                <svg class="w-4 h-4 text-gray-600" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                </svg>
            </button>
            <button id="zoom-out-btn"
                    class="w-8 h-8 bg-white border border-gray-300 rounded-full shadow-md hover:bg-gray-50 flex items-center justify-center transition-colors duration-200"
                    title="Zoom Out">
                <svg class="w-4 h-4 text-gray-600" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>
                </svg>
            </button>
        </div>
    </div>

    <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mt-4 mb-4 rounded-r-lg" id="output-warning">
        <div class="flex">
            <div class="flex-shrink-0">
                <p>
                    ⚠️
                </p>
            </div>
            <div class="ml-3">
                <p class="text-sm text-blue-700">
                    <strong>Don't like the output?</strong> You might want to extend your additional details in settings
                    to get more personalized results.
                </p>
            </div>
        </div>
    </div>

    <div id="analysis-content" class="rounded-lg p-4 border-2 border-gray-200 transition-colors duration-200">
        <div class="clearfix">
            <div id="strengths-section" class="column-left">
                <h3 style="color: green; font-weight: bold;">Strengths: </h3>
                <ul>
                    <li><strong>Strength 1:</strong> [Provide a brief, generic description of a key strength.]</li>
                    <li><strong>Strength 2:</strong> [Provide a brief, generic description of a second key strength.]
                    </li>
                    <li><strong>Strength 3:</strong> [Provide a brief, generic description of a third key strength.]
                    </li>
                </ul>
            </div>

            <div id="areas-for-improvement-section" class="column-right">
                <h3 style="color: red; font-weight: bold;">Areas for Improvement: </h3>
                <ul>
                    <li><strong>Area for Improvement 1:</strong> [Describe a point that could be strengthened on the
                        resume or in the application materials.]
                    </li>
                    <li><strong>Area for Improvement 2:</strong> [Describe another area for improvement.]</li>
                    <li><strong>Area for Improvement 3:</strong> [Describe a final area for improvement.]</li>
                </ul>
            </div>
        </div>

        <div id="overall-fit-section" style="clear: both; margin-top: 2rem;">
            <h2 style="font-weight: bold;">
                <span style="color: green;">[fit score]</span>.
                [Overall fit description].
            </h2>
        </div>
    </div>

    <!-- Job-Specific Context Field -->
    <div class="mb-6" id="job-specific-context-section">
        <label for="job-specific-context" class="block mt-2 mb-2 font-bold text-gray-700">
            Job-Specific Context (Optional)
        </label>
        <p class="text-sm text-gray-600 mb-3">
            Add any specific details about <strong>this particular job</strong> that would help tailor your application
            materials.
            For example: company culture insights, specific projects mentioned in the job posting, connections at the
            company,
            or why you're particularly interested in this role.
        </p>
        <textarea id="job-specific-context"
                  class="w-full h-24 p-3 border border-gray-300 rounded box-border font-sans text-sm leading-5 resize-y"
                  placeholder="e.g., I'm particularly excited about this role because of the company's focus on sustainable technology..."></textarea>
    </div>

    <!-- Resume Retry Feedback Section -->
    <div id="resume-retry-feedback-section" class="mt-6 hidden">
        <label for="resume-retry-feedback" class="block mb-2 font-bold text-gray-700">
            Resume Feedback (Job-Specific)
        </label>
        <p class="text-sm text-gray-600 mb-3">
            What would you like to improve about the current tailored resume for <strong>this specific job</strong>?
            Be specific about changes you'd like to see and note that only the text content can be changed, the style is
            fixed with the theme.
        </p>
        <textarea id="resume-retry-feedback"
                  class="w-full h-20 p-3 border border-gray-300 rounded box-border font-sans text-sm leading-5 resize-y"
                  placeholder="e.g., Emphasize my Python experience more, add details about my leadership role in the X project..."></textarea>
    </div>

    <!-- Cover Letter Retry Feedback Section -->
    <div id="cover-letter-retry-feedback-section" class="mt-6 hidden">
        <label for="cover-letter-retry-feedback" class="block mb-2 font-bold text-gray-700">
            Cover Letter Feedback (Job-Specific)
        </label>
        <p class="text-sm text-gray-600 mb-3">
            What would you like to improve about the current cover letter for <strong>this specific job</strong>?
            Be specific about tone, content, or focus areas.
        </p>
        <textarea id="cover-letter-retry-feedback"
                  class="w-full h-20 p-3 border border-gray-300 rounded box-border font-sans text-sm leading-5 resize-y"
                  placeholder="e.g., Make it more enthusiastic, focus more on my relevant project experience, adjust the tone to be more formal..."></textarea>
    </div>

    <div id="retry-error-message" class="mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-md hidden">
        Please provide some feedback to guide the retry.
    </div>

    <div class="mt-6 space-y-3">
        <button id="this-needs-work-btn"
                class="bg-blue-500 text-white py-3 px-5 border-0 rounded cursor-pointer w-full text-base hover:bg-blue-600 transition-colors duration-200 hidden">
            <strong style="font-size: 1.2rem">🚧</strong> This needs work <strong style="font-size: 1.2rem">🚧</strong>
        </button>
        <button id="retry-btn"
                class="bg-blue-500 text-white py-3 px-5 border-0 rounded cursor-pointer w-full text-base hover:bg-blue-600 transition-colors duration-200 hidden">
            <strong style="font-size: 1.2rem">⟳</strong>Retry
        </button>
        <button id="download-tailored-resume-btn"
                class="bg-blue-500 text-white py-3 px-5 border-0 rounded cursor-pointer w-full text-base hover:bg-blue-600 transition-colors duration-200 hidden flex items-center justify-center">
            <svg class="w-5 h-5 mr-2" stroke="currentColor" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
            </svg>
            <span>Download Tailored Resume</span>
        </button>
        <button id="download-cover-letter-btn"
                class="bg-blue-500 text-white py-3 px-5 border-0 rounded cursor-pointer w-full text-base hover:bg-blue-600 transition-colors duration-200 hidden flex items-center justify-center">
            <svg class="w-5 h-5 mr-2" stroke="currentColor" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
            </svg>
            <span>Download Cover Letter</span>
        </button>
        <button id="tailor-resume-btn"
                class="bg-blue-500 text-white py-3 px-5 border-0 rounded cursor-pointer w-full text-base hover:bg-blue-600 transition-colors duration-200 hidden">
            ✨ Tailor Resume
        </button>
        <button id="generate-cover-letter-btn"
                class="bg-blue-500 text-white py-3 px-5 border-0 rounded cursor-pointer w-full text-base hover:bg-blue-600 transition-colors duration-200 hidden">
            ✨ Draft a Cover Letter
        </button>
    </div>
</div>

<div id="loading-spinner-section" class="bg-white p-5 rounded-lg shadow-md mb-4 hidden">
    <div class="loading-spinner"></div>
    <p id="loading-spinner-title" class="text-center"></p>
    <div id="loading-messages"
         class="text-center p-8 rounded-xl bg-white shadow-lg relative w-full h-36 hidden">
        <div class="loading-msg hidden absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-11/12 text-xl font-semibold leading-6"
             id="loading-msg-bmc" data-id="bmc" data-kinds="analyze cover-letter resume" data-freeze="true">
            <p>If this helps you land the job, please consider supporting the project:</p>
            <div class="flex justify-center mt-3">
                <a href="https://buymeacoffee.com/v1rtu0z96" target="_blank" rel="noopener noreferrer"
                   class="flex items-center justify-center py-3 px-6 no-underline text-black bg-yellow-300 rounded-full font-bold text-base shadow-md min-w-fit hover-scale">
                    <img src="https://www.buymeacoffee.com/assets/img/BMC-btn-logo.svg" alt="Buy Me a Coffee"
                         class="h-6 w-6 flex-shrink-0">
                    <span class="ml-2 whitespace-nowrap">Buy me a coffee</span>
                </a>
            </div>
        </div>

        <div class="loading-msg hidden absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-11/12 text-xl font-semibold leading-6"
             id="loading-msg-feedback" data-id="feedback" data-kinds="analyze cover-letter resume">
            <p>Got feedback? I'd be happy to hear it. Send me a message:</p>
            <div class="flex justify-center mt-3">
                <a href="mailto:nikolamandic1996@gmail.com?subject=AI%20Job%20Search%20Helper%20Feedback"
                   class="flex items-center no-underline text-gray-800 bg-gray-100 border border-gray-300 rounded-full py-3 px-5 font-bold text-base shadow-sm hover-scale">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="h-6 w-6 fill-gray-800">
                        <path d="M22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6zm-2 0l-8 5-8-5h16zm0 12H4V8l8 5 8-5v10z"/>
                    </svg>
                    <span class="ml-3">Send feedback</span>
                </a>
            </div>
        </div>

        <div class="loading-msg hidden absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-11/12 text-xl font-semibold leading-6"
             id="loading-msg-llamaindex" data-id="llamaindex" data-kinds="analyze cover-letter resume">
            This extension wouldn't have been possible without <a href="https://github.com/run-llama/llama_index"
                                                                  target="_blank" rel="noopener noreferrer"
                                                                  class="text-blue-600 hover:text-blue-800">LlamaIndex</a>,
            an amazing open source project.
        </div>

        <div class="loading-msg hidden absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-11/12 text-xl font-semibold leading-6"
             id="loading-msg-pdfjs" data-id="pdfjs" data-kinds="analyze cover-letter resume">
            This extension wouldn't have been possible without <a href="https://github.com/mozilla/pdf.js"
                                                                  target="_blank" rel="noopener noreferrer"
                                                                  class="text-blue-600 hover:text-blue-800">pdf.js</a>,
            an amazing open source project.
        </div>

        <div class="loading-msg hidden absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-11/12 text-xl font-semibold leading-6"
             id="loading-msg-rendercv" data-id="rendercv" data-kinds="analyze cover-letter resume">
            This extension wouldn't have been possible without <a href="https://github.com/rendercv/rendercv"
                                                                  target="_blank" rel="noopener noreferrer"
                                                                  class="text-blue-600 hover:text-blue-800">renderCV</a>,
            an amazing open source project.
        </div>

        <div class="loading-msg hidden absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-11/12 text-xl font-semibold leading-6"
             id="loading-msg-javascript" data-id="javascript" data-kinds="analyze cover-letter resume">
            <p>Powered in part by JavaScript, an open-source standard that <a href="https://javascript.tm/"
                                                                              target="_blank" rel="noopener noreferrer"
                                                                              class="text-blue-600 hover:text-blue-800">Oracle
                should definitely release.</a></p>
        </div>

        <div class="loading-msg hidden absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-11/12 text-xl font-semibold leading-6"
             id="loading-msg-source" data-id="source" data-kinds="analyze cover-letter resume">
            <p>This project is open source!</p>
            <p><a href="https://github.com/v1rtu0z/ai-job-search-helper" target="_blank" rel="noopener noreferrer"
                  class="text-blue-600 hover:text-blue-800">Check out the code on GitHub.</a></p>
        </div>
    </div>
</div>

<div id="settings-view" class="hidden p-4 space-y-4">

    <div id="user-details-section" class="bg-white p-5 rounded-lg shadow-md">
        <p class="mb-4">Let the AI know a bit about you:</p>

        <label for="resume-file" class="block mb-2 font-bold">📄 Upload your Resume (PDF or TXT):</label>
        <div id="resume-file-name" class="mb-3"></div>
        <input type="file" id="resume-file" accept=".pdf,.txt"
               class="w-full p-3 mb-4 border border-gray-300 rounded box-border">

        <label for="additional-details" class="block mb-2 font-bold">Additional Details:</label>
        <textarea id="additional-details" rows="4"
                  placeholder="Information like preferred roles, industries, locations, salary ranges..."
                  class="w-full p-3 mb-4 border border-gray-300 rounded box-border"></textarea>
        <p id="user-details-message" class="text-green-600 mt-3"></p>
    </div>

    <div id="theme-selection-section" class="bg-white p-5 rounded-lg shadow-md">
        <h3 class="text-lg font-semibold mb-4">🎨 Choose a theme for your tailored resumes</h3>
        <h6 class="text-sm text-gray-500 mb-4">⬅ Expand the side panel for a closer look at the theme.</h6>

        <div class="flex items-center justify-between mb-4">
            <button id="theme-prev-btn"
                    class="w-8 h-8 bg-gray-100 border border-gray-300 rounded-full shadow-sm hover:bg-gray-200 flex items-center justify-center transition-colors duration-200"
                    title="Previous Theme">
                <svg class="w-4 h-4 text-gray-600" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                </svg>
            </button>

            <div class="flex-1 mx-4">
                <div class="theme-display bg-gray-50 rounded-lg p-4 border-2 border-gray-200 transition-colors duration-200"
                     id="current-theme-display">
                    <div class="flex justify-center mb-3">
                        <img id="current-theme-image" alt="Classic Theme"
                             class="w-full h-auto object-contain rounded shadow-sm">
                        <div id="theme-fallback" class="hidden text-gray-500 text-lg bg-gray-200 p-8 rounded">Classic
                        </div>
                    </div>
                    <p id="current-theme-name" class="text-center font-semibold text-lg">classic</p>
                </div>
            </div>

            <button id="theme-next-btn"
                    class="w-8 h-8 bg-gray-100 border border-gray-300 rounded-full shadow-sm hover:bg-gray-200 flex items-center justify-center transition-colors duration-200"
                    title="Next Theme">
                <svg class="w-4 h-4 text-gray-600" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
            </button>
        </div>

        <div class="flex justify-center space-x-2">
            <div class="theme-indicator w-2 h-2 bg-blue-500 rounded-full cursor-pointer" data-theme="classic"
                 title="classic"></div>
            <div class="theme-indicator w-2 h-2 bg-gray-300 rounded-full cursor-pointer" data-theme="sb2nov"
                 title="sb2nov"></div>
            <div class="theme-indicator w-2 h-2 bg-gray-300 rounded-full cursor-pointer" data-theme="engineeringresumes"
                 title="engineeringresumes"></div>
            <div class="theme-indicator w-2 h-2 bg-gray-300 rounded-full cursor-pointer" data-theme="engineeringclassic"
                 title="engineeringclassic"></div>
            <div class="theme-indicator w-2 h-2 bg-gray-300 rounded-full cursor-pointer" data-theme="moderncv"
                 title="moderncv"></div>
        </div>

        <input type="hidden" id="selected-theme" value="classic">
    </div>

    <!-- Data consent section -->
    <div class="pt-4 mt-4">
        <div class="flex items-start space-x-3">
            <input type="checkbox"
                   id="data-consent-checkbox-settings"
                   class="mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
            <label for="data-consent-checkbox" class="text-gray-700 leading-relaxed cursor-pointer">
                <strong>Help improve this extension (Optional)</strong><br>
                Allow logging of your data when technical issues occur.
                This helps me diagnose problems and improve the extension.
                Logs would be the only place where your data gets stored and would never be used for any other purpose.
            </label>
        </div>
    </div>

    <div id="advanced-settings-toggle"
         class="bg-gray-200 p-4 rounded-lg shadow-sm cursor-pointer flex justify-between items-center transition-colors duration-200 hover:bg-gray-300">
        <h3 class="text-md font-semibold text-gray-800">⚙️ Advanced Settings</h3>
        <svg id="advanced-settings-icon" class="w-5 h-5 text-gray-600 transition-transform duration-200"
             stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
        </svg>
    </div>

    <div id="advanced-settings-content" class="hidden">
        <div class="bg-white p-5 rounded-lg shadow-md mb-4">

            <div class="mb-4">
                <label for="resume-json-data" class="block mb-2 font-bold">Resume JSON Data: (this is the result of
                    parsing your resume, NOTE: changing this overrides your resume and additional details
                    fields!) </label>
                <textarea id="resume-json-data" rows="10"
                          class="w-full p-3 border border-gray-300 rounded box-border font-mono text-sm"
                          placeholder="Paste your resume data here in JSON format."></textarea>
            </div>


            <div id="google-ai-config-section" class="mb-4 hidden">
                <h3 class="text-lg font-semibold mb-4">Google AI settings</h3>

                <div id="api-key-section">
                    <label for="google-api-key" class="block mb-2 font-bold">Google API Key:</label>
                    <p class="mb-4">You can set up your free tier key <a href="https://aistudio.google.com/app/apikey"
                                                                         target="_blank" rel="noopener noreferrer"
                                                                         class="text-blue-600 hover:text-blue-800">here</a>.
                        To learn more about what an API key is, click <a href="https://en.wikipedia.org/wiki/API_key"
                                                                         target="_blank" rel="noopener noreferrer"
                                                                         class="text-blue-600 hover:text-blue-800">here</a>.
                    </p>
                    <input type="text" id="google-api-key"
                           placeholder="this value is already pre-set, only change it if you're facing issues"
                           class="w-full p-3 mb-4 border border-gray-300 rounded box-border">
                    <p id="api-key-message" class="text-red-600 mt-3"></p>
                </div>

                <div class="mb-4">
                    <label for="model-name" class="block mb-2 font-bold">Model Name:</label>
                    <input type="text" id="model-name" value="gemini-2.5-flash"
                           class="w-full p-3 border border-gray-300 rounded box-border font-mono text-sm">
                </div>

                <div class="mb-4">
                    <label for="fallback-model-name" class="block mb-2 font-bold">Fallback Model Name:</label>
                    <input type="text" id="fallback-model-name" value="gemini-2.0-flash"
                           class="w-full p-3 border border-gray-300 rounded box-border font-mono text-sm">
                </div>
            </div>
        </div>
    </div>

    <div class="fixed bottom-0 left-0 right-0 bg-transparent border-t border-gray-200 p-4 shadow-lg z-50">
        <div class="max-w-4xl mx-auto">
            <button id="save-all-settings-btn"
                    class="bg-blue-500 text-white py-3 px-5 border-0 rounded cursor-pointer w-full text-base hover:bg-blue-600 transition-colors duration-200 shadow-md">
                💾 Save All Settings
            </button>
        </div>
    </div>
</div>

<div id="settings-explainer-overlay"
     class="fixed inset-0 backdrop-overlay flex items-center justify-center z-50 hidden transition-opacity duration-300">
    <div id="settings-explainer-modal"
         class="bg-white p-6 rounded-lg shadow-xl text-left max-w-xl w-full mx-4 relative text-sm">
        <button id="close-explainer-btn"
                class="absolute top-2 right-2 text-gray-400 hover:text-gray-600 cursor-pointer p-1 text-xl font-bold mb-2">
            ✖
        </button>
        <h3 class="text-xl font-bold mb-2">Welcome! 👋</h3>
        <p class="text-gray-700 mb-4">
            This extension is your personal AI assistant for your job search. It helps you by analyzing job descriptions
            and instantly tailoring your resume and cover letter to match the requirements.
        </p>
        <p class="text-gray-700 mb-2">
            To get started, please upload your resume. This is the <strong>most crucial step</strong>, as it allows the
            AI to learn
            about your skills and experience. The AI will then use this information to:
        </p>
        <ul class="list-disc list-inside text-gray-700 mb-4 ml-4 space-y-1">
            <li>Analyze job postings and tell you how well you match the requirements.</li>
            <li>Generate a personalized cover letter based on your resume and the job description.</li>
            <li>Create a tailored resume from your master resume that highlights the most relevant skills for the job.
            </li>
        </ul>
        <p class="text-gray-700">
            The <strong>Additional Details</strong> field is a great way to give the AI more context, such as specific
            roles you're
            interested in, preferred industries, or salary expectations. This helps the AI be even more precise in its
            suggestions.
        </p>

        <!-- Data consent section -->
        <div class="border-t pt-4 mt-4">
            <div class="flex items-start space-x-3">
                <input type="checkbox"
                       id="data-consent-checkbox"
                       class="mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                <label for="data-consent-checkbox" class="text-gray-700 leading-relaxed cursor-pointer">
                    <strong>Help improve this extension (Optional)</strong><br>
                    Allow logging of your data when technical issues occur.
                    This helps me diagnose problems and improve the extension.
                    Logs would be the only place where your data gets stored and would never be used for any other purpose.
                </label>
            </div>
        </div>
    </div>
</div>

<div id="sponsorship-popup-overlay"
     class="fixed inset-0 backdrop-overlay flex items-center justify-center z-50 hidden transition-opacity duration-300">
    <div id="sponsorship-popup-modal"
         class="bg-white p-6 rounded-lg shadow-xl text-center max-w-sm w-full mx-4 relative">
        <button id="close-popup-btn"
                class="absolute top-2 right-2 text-gray-400 hover:text-gray-600 cursor-pointer p-1 text-xl font-bold mb-2">
            ✖
        </button>
        <p class="text-xl font-bold mb-2">Hard Work Pays Off!</p>
        <p class="text-gray-700 mb-6">
            It looks like you're working hard to land your next role. I wish you the best of luck in your job search!
        </p>
        <p class="text-gray-700 mb-6">
            If you get hired, or simply find this extension helpful, please consider supporting the project.
        </p>
        <a href="https://buymeacoffee.com/v1rtu0z96" target="_blank"
           class="inline-block bg-yellow-400 hover:bg-yellow-500 text-gray-800 font-bold py-2 px-4 rounded-full shadow-lg transition-colors duration-200">
            Buy me a coffee
        </a>
    </div>
</div>


<script type="module" src="js/pdf.mjs"></script>
<script type="module" src="src/sidepanel.ts"></script>
</body>
</html>